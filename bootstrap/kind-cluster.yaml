kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4

# Configure containerd to use local registry
containerdConfigPatches:
- |-
  [plugins."io.containerd.grpc.v1.cri".registry.mirrors."localhost:5001"]
    endpoint = ["http://kind-registry:5000"]

nodes:
  # Control plane node - no workloads scheduled here
  - role: control-plane

  # General worker node - for OpenWebUI, Prometheus
  - role: worker
    labels:
      role: general

  # Inference worker node - dedicated to Ollama with taint
  - role: worker
    labels:
      role: inference
    kubeadmConfigPatches:
      - |
        kind: JoinConfiguration
        nodeRegistration:
          taints:
            - key: "role"
              value: "inference"
              effect: "NoSchedule"